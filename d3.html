<!DOCTYPE html>
<html  lang="en">

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Introduction to Programming</title>
  <meta name="description" content="The course reader for INFX 511: Introduction to Programming for Data Science and Visualization.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Introduction to Programming" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://infx511.github.io/" />
  
  <meta property="og:description" content="The course reader for INFX 511: Introduction to Programming for Data Science and Visualization." />
  <meta name="github-repo" content="infx511/book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Introduction to Programming" />
  
  <meta name="twitter:description" content="The course reader for INFX 511: Introduction to Programming for Data Science and Visualization." />
  

<meta name="author" content="Joel Ross">


<meta name="date" content="2018-05-16">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  <link rel="shortcut icon" href="img/ischool-gold.png" type="image/x-icon">
<link rel="prev" href="web-programming.html">
<link rel="next" href="markdown.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/prism.min.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./" class="title">Introduction to Programming</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this Book</a></li>
<li class="chapter" data-level="1" data-path="setup-machine.html"><a href="setup-machine.html"><i class="fa fa-check"></i><b>1</b> Setting Up Your Machine</a><ul>
<li class="chapter" data-level="1.1" data-path="setup-machine.html"><a href="setup-machine.html#git"><i class="fa fa-check"></i><b>1.1</b> Git</a><ul>
<li class="chapter" data-level="1.1.1" data-path="setup-machine.html"><a href="setup-machine.html#github"><i class="fa fa-check"></i><b>1.1.1</b> GitHub</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="setup-machine.html"><a href="setup-machine.html#command-line-tools-bash"><i class="fa fa-check"></i><b>1.2</b> Command-line Tools (Bash)</a><ul>
<li class="chapter" data-level="1.2.1" data-path="setup-machine.html"><a href="setup-machine.html#command-line-on-a-mac"><i class="fa fa-check"></i><b>1.2.1</b> Command-line on a Mac</a></li>
<li class="chapter" data-level="1.2.2" data-path="setup-machine.html"><a href="setup-machine.html#command-line-on-windows"><i class="fa fa-check"></i><b>1.2.2</b> Command-line on Windows</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="setup-machine.html"><a href="setup-machine.html#text-editors"><i class="fa fa-check"></i><b>1.3</b> Text Editors</a><ul>
<li class="chapter" data-level="1.3.1" data-path="setup-machine.html"><a href="setup-machine.html#visual-studio-code"><i class="fa fa-check"></i><b>1.3.1</b> Visual Studio Code</a></li>
<li class="chapter" data-level="1.3.2" data-path="setup-machine.html"><a href="setup-machine.html#atom"><i class="fa fa-check"></i><b>1.3.2</b> Atom</a></li>
<li class="chapter" data-level="1.3.3" data-path="setup-machine.html"><a href="setup-machine.html#sublime-text"><i class="fa fa-check"></i><b>1.3.3</b> Sublime Text</a></li>
<li class="chapter" data-level="1.3.4" data-path="setup-machine.html"><a href="setup-machine.html#pycharm"><i class="fa fa-check"></i><b>1.3.4</b> PyCharm</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="setup-machine.html"><a href="setup-machine.html#python"><i class="fa fa-check"></i><b>1.4</b> Python</a><ul>
<li class="chapter" data-level="1.4.1" data-path="setup-machine.html"><a href="setup-machine.html#anaconda"><i class="fa fa-check"></i><b>1.4.1</b> Anaconda</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="setup-machine.html"><a href="setup-machine.html#resources"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="command-line.html"><a href="command-line.html"><i class="fa fa-check"></i><b>2</b> The Command Line</a><ul>
<li class="chapter" data-level="2.1" data-path="command-line.html"><a href="command-line.html#accessing-the-command-line"><i class="fa fa-check"></i><b>2.1</b> Accessing the Command line</a></li>
<li class="chapter" data-level="2.2" data-path="command-line.html"><a href="command-line.html#navigating-the-command-line"><i class="fa fa-check"></i><b>2.2</b> Navigating the Command Line</a><ul>
<li class="chapter" data-level="2.2.1" data-path="command-line.html"><a href="command-line.html#changing-directories"><i class="fa fa-check"></i><b>2.2.1</b> Changing Directories</a></li>
<li class="chapter" data-level="2.2.2" data-path="command-line.html"><a href="command-line.html#listing-files"><i class="fa fa-check"></i><b>2.2.2</b> Listing Files</a></li>
<li class="chapter" data-level="2.2.3" data-path="command-line.html"><a href="command-line.html#paths"><i class="fa fa-check"></i><b>2.2.3</b> Paths</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="command-line.html"><a href="command-line.html#file-commands"><i class="fa fa-check"></i><b>2.3</b> File Commands</a><ul>
<li class="chapter" data-level="2.3.1" data-path="command-line.html"><a href="command-line.html#learning-new-commands"><i class="fa fa-check"></i><b>2.3.1</b> Learning New Commands</a></li>
<li class="chapter" data-level="2.3.2" data-path="command-line.html"><a href="command-line.html#wildcards"><i class="fa fa-check"></i><b>2.3.2</b> Wildcards</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="command-line.html"><a href="command-line.html#dealing-with-errors"><i class="fa fa-check"></i><b>2.4</b> Dealing With Errors</a></li>
<li class="chapter" data-level="2.5" data-path="command-line.html"><a href="command-line.html#directing-output"><i class="fa fa-check"></i><b>2.5</b> Directing Output</a></li>
<li class="chapter" data-level="2.6" data-path="command-line.html"><a href="command-line.html#shell-scripts"><i class="fa fa-check"></i><b>2.6</b> Shell Scripts</a></li>
<li class="chapter" data-level="" data-path="command-line.html"><a href="command-line.html#resources-1"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="git-basics.html"><a href="git-basics.html"><i class="fa fa-check"></i><b>3</b> Git and GitHub</a><ul>
<li class="chapter" data-level="3.1" data-path="git-basics.html"><a href="git-basics.html#what-is-this-git-thing-anyway"><i class="fa fa-check"></i><b>3.1</b> What is this <em>git</em> thing anyway?</a><ul>
<li class="chapter" data-level="3.1.1" data-path="git-basics.html"><a href="git-basics.html#git-core-concepts"><i class="fa fa-check"></i><b>3.1.1</b> Git Core Concepts</a></li>
<li class="chapter" data-level="3.1.2" data-path="git-basics.html"><a href="git-basics.html#wait-but-what-is-github-then"><i class="fa fa-check"></i><b>3.1.2</b> Wait, but what is GitHub then?</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="git-basics.html"><a href="git-basics.html#installation-setup"><i class="fa fa-check"></i><b>3.2</b> Installation &amp; Setup</a><ul>
<li class="chapter" data-level="3.2.1" data-path="git-basics.html"><a href="git-basics.html#creating-a-repo"><i class="fa fa-check"></i><b>3.2.1</b> Creating a Repo</a></li>
<li class="chapter" data-level="3.2.2" data-path="git-basics.html"><a href="git-basics.html#checking-status"><i class="fa fa-check"></i><b>3.2.2</b> Checking Status</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="git-basics.html"><a href="git-basics.html#making-changes"><i class="fa fa-check"></i><b>3.3</b> Making Changes</a><ul>
<li class="chapter" data-level="3.3.1" data-path="git-basics.html"><a href="git-basics.html#adding-files"><i class="fa fa-check"></i><b>3.3.1</b> Adding Files</a></li>
<li class="chapter" data-level="3.3.2" data-path="git-basics.html"><a href="git-basics.html#committing"><i class="fa fa-check"></i><b>3.3.2</b> Committing</a></li>
<li class="chapter" data-level="3.3.3" data-path="git-basics.html"><a href="git-basics.html#commit-history"><i class="fa fa-check"></i><b>3.3.3</b> Commit History</a></li>
<li class="chapter" data-level="3.3.4" data-path="git-basics.html"><a href="git-basics.html#reviewing-the-process"><i class="fa fa-check"></i><b>3.3.4</b> Reviewing the Process</a></li>
<li class="chapter" data-level="3.3.5" data-path="git-basics.html"><a href="git-basics.html#the-.gitignore-file"><i class="fa fa-check"></i><b>3.3.5</b> The <code>.gitignore</code> File</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="git-basics.html"><a href="git-basics.html#github-and-remotes"><i class="fa fa-check"></i><b>3.4</b> GitHub and Remotes</a><ul>
<li class="chapter" data-level="3.4.1" data-path="git-basics.html"><a href="git-basics.html#forking-and-cloning"><i class="fa fa-check"></i><b>3.4.1</b> Forking and Cloning</a></li>
<li class="chapter" data-level="3.4.2" data-path="git-basics.html"><a href="git-basics.html#pushing-and-pulling"><i class="fa fa-check"></i><b>3.4.2</b> Pushing and Pulling</a></li>
<li class="chapter" data-level="3.4.3" data-path="git-basics.html"><a href="git-basics.html#reviewing-the-process-1"><i class="fa fa-check"></i><b>3.4.3</b> Reviewing The Process</a></li>
<li class="chapter" data-level="3.4.4" data-path="git-basics.html"><a href="git-basics.html#course-assignments-on-github"><i class="fa fa-check"></i><b>3.4.4</b> Course Assignments on GitHub</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="git-basics.html"><a href="git-basics.html#command-summary"><i class="fa fa-check"></i><b>3.5</b> Command Summary</a></li>
<li class="chapter" data-level="" data-path="git-basics.html"><a href="git-basics.html#resources-2"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="python-intro.html"><a href="python-intro.html"><i class="fa fa-check"></i><b>4</b> Introduction to Python</a><ul>
<li class="chapter" data-level="4.1" data-path="python-intro.html"><a href="python-intro.html#programming-with-python"><i class="fa fa-check"></i><b>4.1</b> Programming with Python</a><ul>
<li class="chapter" data-level="4.1.1" data-path="python-intro.html"><a href="python-intro.html#versions"><i class="fa fa-check"></i><b>4.1.1</b> Versions</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="python-intro.html"><a href="python-intro.html#running-python-scripts"><i class="fa fa-check"></i><b>4.2</b> Running Python Scripts</a><ul>
<li class="chapter" data-level="4.2.1" data-path="python-intro.html"><a href="python-intro.html#on-the-command-line"><i class="fa fa-check"></i><b>4.2.1</b> On the Command Line</a></li>
<li class="chapter" data-level="4.2.2" data-path="python-intro.html"><a href="python-intro.html#jupyter-notebooks"><i class="fa fa-check"></i><b>4.2.2</b> Jupyter Notebooks</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="python-intro.html"><a href="python-intro.html#comments"><i class="fa fa-check"></i><b>4.3</b> Comments</a></li>
<li class="chapter" data-level="4.4" data-path="python-intro.html"><a href="python-intro.html#variables"><i class="fa fa-check"></i><b>4.4</b> Variables</a><ul>
<li class="chapter" data-level="4.4.1" data-path="python-intro.html"><a href="python-intro.html#data-types"><i class="fa fa-check"></i><b>4.4.1</b> Data Types</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="python-intro.html"><a href="python-intro.html#getting-help"><i class="fa fa-check"></i><b>4.5</b> Getting Help</a></li>
<li class="chapter" data-level="" data-path="python-intro.html"><a href="python-intro.html#resources-3"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>5</b> Functions</a><ul>
<li class="chapter" data-level="5.1" data-path="functions.html"><a href="functions.html#what-are-functions"><i class="fa fa-check"></i><b>5.1</b> What are Functions?</a></li>
<li class="chapter" data-level="5.2" data-path="functions.html"><a href="functions.html#python-function-syntax"><i class="fa fa-check"></i><b>5.2</b> Python Function Syntax</a><ul>
<li class="chapter" data-level="5.2.1" data-path="functions.html"><a href="functions.html#object-methods"><i class="fa fa-check"></i><b>5.2.1</b> Object Methods</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="functions.html"><a href="functions.html#built-in-python-functions"><i class="fa fa-check"></i><b>5.3</b> Built-in Python Functions</a><ul>
<li class="chapter" data-level="5.3.1" data-path="functions.html"><a href="functions.html#modules-and-libraries"><i class="fa fa-check"></i><b>5.3.1</b> Modules and Libraries</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="functions.html"><a href="functions.html#writing-functions"><i class="fa fa-check"></i><b>5.4</b> Writing Functions</a><ul>
<li class="chapter" data-level="5.4.1" data-path="functions.html"><a href="functions.html#doc-strings"><i class="fa fa-check"></i><b>5.4.1</b> Doc Strings</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="functions.html"><a href="functions.html#resources-4"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="logic.html"><a href="logic.html"><i class="fa fa-check"></i><b>6</b> Logic and Conditionals</a><ul>
<li class="chapter" data-level="6.1" data-path="logic.html"><a href="logic.html#booleans"><i class="fa fa-check"></i><b>6.1</b> Booleans</a><ul>
<li class="chapter" data-level="6.1.1" data-path="logic.html"><a href="logic.html#boolean-operators"><i class="fa fa-check"></i><b>6.1.1</b> Boolean Operators</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="logic.html"><a href="logic.html#conditional-statements"><i class="fa fa-check"></i><b>6.2</b> Conditional Statements</a><ul>
<li class="chapter" data-level="6.2.1" data-path="logic.html"><a href="logic.html#designing-conditions"><i class="fa fa-check"></i><b>6.2.1</b> Designing Conditions</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="logic.html"><a href="logic.html#determining-module-or-script"><i class="fa fa-check"></i><b>6.3</b> Determining Module or Script</a></li>
<li class="chapter" data-level="" data-path="logic.html"><a href="logic.html#resources-5"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="iteration-and-loops.html"><a href="iteration-and-loops.html"><i class="fa fa-check"></i><b>7</b> Iteration and Loops</a><ul>
<li class="chapter" data-level="7.1" data-path="iteration-and-loops.html"><a href="iteration-and-loops.html#while-loops"><i class="fa fa-check"></i><b>7.1</b> While Loops</a><ul>
<li class="chapter" data-level="7.1.1" data-path="iteration-and-loops.html"><a href="iteration-and-loops.html#counting-and-loops"><i class="fa fa-check"></i><b>7.1.1</b> Counting and Loops</a></li>
<li class="chapter" data-level="7.1.2" data-path="iteration-and-loops.html"><a href="iteration-and-loops.html#nested-conditionals-and-sentinels"><i class="fa fa-check"></i><b>7.1.2</b> Nested Conditionals and Sentinels</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="iteration-and-loops.html"><a href="iteration-and-loops.html#for-loops"><i class="fa fa-check"></i><b>7.2</b> For Loops</a><ul>
<li class="chapter" data-level="7.2.1" data-path="iteration-and-loops.html"><a href="iteration-and-loops.html#difference-from-while-loops"><i class="fa fa-check"></i><b>7.2.1</b> Difference from While Loops</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="iteration-and-loops.html"><a href="iteration-and-loops.html#iterating-over-files"><i class="fa fa-check"></i><b>7.3</b> Iterating over Files</a><ul>
<li class="chapter" data-level="7.3.1" data-path="iteration-and-loops.html"><a href="iteration-and-loops.html#tryexcept"><i class="fa fa-check"></i><b>7.3.1</b> Try/Except</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="iteration-and-loops.html"><a href="iteration-and-loops.html#resources-6"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="lists-and-sequences.html"><a href="lists-and-sequences.html"><i class="fa fa-check"></i><b>8</b> Lists and Sequences</a><ul>
<li class="chapter" data-level="8.1" data-path="lists-and-sequences.html"><a href="lists-and-sequences.html#what-is-a-list"><i class="fa fa-check"></i><b>8.1</b> What is a List?</a></li>
<li class="chapter" data-level="8.2" data-path="lists-and-sequences.html"><a href="lists-and-sequences.html#list-indices"><i class="fa fa-check"></i><b>8.2</b> List Indices</a></li>
<li class="chapter" data-level="8.3" data-path="lists-and-sequences.html"><a href="lists-and-sequences.html#list-operations-and-methods"><i class="fa fa-check"></i><b>8.3</b> List Operations and Methods</a></li>
<li class="chapter" data-level="8.4" data-path="lists-and-sequences.html"><a href="lists-and-sequences.html#lists-and-loops"><i class="fa fa-check"></i><b>8.4</b> Lists and Loops</a></li>
<li class="chapter" data-level="8.5" data-path="lists-and-sequences.html"><a href="lists-and-sequences.html#nested-lists"><i class="fa fa-check"></i><b>8.5</b> Nested Lists</a></li>
<li class="chapter" data-level="8.6" data-path="lists-and-sequences.html"><a href="lists-and-sequences.html#tuples"><i class="fa fa-check"></i><b>8.6</b> Tuples</a></li>
<li class="chapter" data-level="" data-path="lists-and-sequences.html"><a href="lists-and-sequences.html#resources-7"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="dictionaries.html"><a href="dictionaries.html"><i class="fa fa-check"></i><b>9</b> Dictionaries</a><ul>
<li class="chapter" data-level="9.1" data-path="dictionaries.html"><a href="dictionaries.html#what-is-a-dictionary"><i class="fa fa-check"></i><b>9.1</b> What is a Dictionary?</a></li>
<li class="chapter" data-level="9.2" data-path="dictionaries.html"><a href="dictionaries.html#accessing-a-dictionary"><i class="fa fa-check"></i><b>9.2</b> Accessing a Dictionary</a></li>
<li class="chapter" data-level="9.3" data-path="dictionaries.html"><a href="dictionaries.html#dictionary-methods"><i class="fa fa-check"></i><b>9.3</b> Dictionary Methods</a></li>
<li class="chapter" data-level="9.4" data-path="dictionaries.html"><a href="dictionaries.html#dictionaries-and-loops"><i class="fa fa-check"></i><b>9.4</b> Dictionaries and Loops</a></li>
<li class="chapter" data-level="9.5" data-path="dictionaries.html"><a href="dictionaries.html#nesting-dictionaries"><i class="fa fa-check"></i><b>9.5</b> Nesting Dictionaries</a></li>
<li class="chapter" data-level="9.6" data-path="dictionaries.html"><a href="dictionaries.html#which-data-structure-do-i-use"><i class="fa fa-check"></i><b>9.6</b> Which Data Structure Do I Use?</a></li>
<li class="chapter" data-level="" data-path="dictionaries.html"><a href="dictionaries.html#resources-8"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="searching.html"><a href="searching.html"><i class="fa fa-check"></i><b>10</b> Searching and Efficiency</a><ul>
<li class="chapter" data-level="10.1" data-path="searching.html"><a href="searching.html#linear-search"><i class="fa fa-check"></i><b>10.1</b> Linear Search</a><ul>
<li class="chapter" data-level="10.1.1" data-path="searching.html"><a href="searching.html#maximal-search"><i class="fa fa-check"></i><b>10.1.1</b> Maximal Search</a></li>
<li class="chapter" data-level="10.1.2" data-path="searching.html"><a href="searching.html#falsification-search"><i class="fa fa-check"></i><b>10.1.2</b> Falsification Search</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="searching.html"><a href="searching.html#linear-search-speed"><i class="fa fa-check"></i><b>10.2</b> Linear Search Speed</a></li>
<li class="chapter" data-level="10.3" data-path="searching.html"><a href="searching.html#binary-search"><i class="fa fa-check"></i><b>10.3</b> Binary Search</a><ul>
<li class="chapter" data-level="10.3.1" data-path="searching.html"><a href="searching.html#binary-search-speed"><i class="fa fa-check"></i><b>10.3.1</b> Binary Search Speed</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="searching.html"><a href="searching.html#sorting"><i class="fa fa-check"></i><b>10.4</b> Sorting</a></li>
<li class="chapter" data-level="" data-path="searching.html"><a href="searching.html#resources-9"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="functional-programming.html"><a href="functional-programming.html"><i class="fa fa-check"></i><b>11</b> Functional Programming</a><ul>
<li class="chapter" data-level="11.1" data-path="functional-programming.html"><a href="functional-programming.html#functions-are-variables"><i class="fa fa-check"></i><b>11.1</b> Functions ARE Variables</a><ul>
<li class="chapter" data-level="11.1.1" data-path="functional-programming.html"><a href="functional-programming.html#lambdas-anonymous-functions"><i class="fa fa-check"></i><b>11.1.1</b> lambdas: Anonymous Functions</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="functional-programming.html"><a href="functional-programming.html#functional-looping"><i class="fa fa-check"></i><b>11.2</b> Functional Looping</a><ul>
<li class="chapter" data-level="11.2.1" data-path="functional-programming.html"><a href="functional-programming.html#map"><i class="fa fa-check"></i><b>11.2.1</b> Map</a></li>
<li class="chapter" data-level="11.2.2" data-path="functional-programming.html"><a href="functional-programming.html#filter"><i class="fa fa-check"></i><b>11.2.2</b> Filter</a></li>
<li class="chapter" data-level="11.2.3" data-path="functional-programming.html"><a href="functional-programming.html#reduce"><i class="fa fa-check"></i><b>11.2.3</b> Reduce</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="functional-programming.html"><a href="functional-programming.html#list-comprehensions"><i class="fa fa-check"></i><b>11.3</b> List Comprehensions</a></li>
<li class="chapter" data-level="" data-path="functional-programming.html"><a href="functional-programming.html#resources-10"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="accessing-web-apis.html"><a href="accessing-web-apis.html"><i class="fa fa-check"></i><b>12</b> Accessing Web APIs</a><ul>
<li class="chapter" data-level="12.1" data-path="accessing-web-apis.html"><a href="accessing-web-apis.html#web-apis"><i class="fa fa-check"></i><b>12.1</b> Web APIs</a></li>
<li class="chapter" data-level="12.2" data-path="accessing-web-apis.html"><a href="accessing-web-apis.html#restful-requests"><i class="fa fa-check"></i><b>12.2</b> RESTful Requests</a><ul>
<li class="chapter" data-level="12.2.1" data-path="accessing-web-apis.html"><a href="accessing-web-apis.html#uris"><i class="fa fa-check"></i><b>12.2.1</b> URIs</a></li>
<li class="chapter" data-level="12.2.2" data-path="accessing-web-apis.html"><a href="accessing-web-apis.html#http-verbs"><i class="fa fa-check"></i><b>12.2.2</b> HTTP Verbs</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="accessing-web-apis.html"><a href="accessing-web-apis.html#accessing-web-apis-1"><i class="fa fa-check"></i><b>12.3</b> Accessing Web APIs</a></li>
<li class="chapter" data-level="12.4" data-path="accessing-web-apis.html"><a href="accessing-web-apis.html#json-data"><i class="fa fa-check"></i><b>12.4</b> JSON Data</a></li>
<li class="chapter" data-level="" data-path="accessing-web-apis.html"><a href="accessing-web-apis.html#resources-11"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="git-branches.html"><a href="git-branches.html"><i class="fa fa-check"></i><b>13</b> Git Branches</a><ul>
<li class="chapter" data-level="13.1" data-path="git-branches.html"><a href="git-branches.html#git-branches"><i class="fa fa-check"></i><b>13.1</b> Git Branches</a></li>
<li class="chapter" data-level="13.2" data-path="git-branches.html"><a href="git-branches.html#merging"><i class="fa fa-check"></i><b>13.2</b> Merging</a><ul>
<li class="chapter" data-level="13.2.1" data-path="git-branches.html"><a href="git-branches.html#merge-conflicts"><i class="fa fa-check"></i><b>13.2.1</b> Merge Conflicts</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="git-branches.html"><a href="git-branches.html#undoing-changes"><i class="fa fa-check"></i><b>13.3</b> Undoing Changes</a></li>
<li class="chapter" data-level="13.4" data-path="git-branches.html"><a href="git-branches.html#github-and-branches"><i class="fa fa-check"></i><b>13.4</b> GitHub and Branches</a><ul>
<li class="chapter" data-level="13.4.1" data-path="git-branches.html"><a href="git-branches.html#github-pages"><i class="fa fa-check"></i><b>13.4.1</b> GitHub Pages</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="git-branches.html"><a href="git-branches.html#resources-12"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="git-collaboration.html"><a href="git-collaboration.html"><i class="fa fa-check"></i><b>14</b> Git Collaboration</a><ul>
<li class="chapter" data-level="14.1" data-path="git-collaboration.html"><a href="git-collaboration.html#centralized-workflow"><i class="fa fa-check"></i><b>14.1</b> Centralized Workflow</a></li>
<li class="chapter" data-level="14.2" data-path="git-collaboration.html"><a href="git-collaboration.html#feature-branch-workflow"><i class="fa fa-check"></i><b>14.2</b> Feature Branch Workflow</a></li>
<li class="chapter" data-level="14.3" data-path="git-collaboration.html"><a href="git-collaboration.html#forking-workflow"><i class="fa fa-check"></i><b>14.3</b> Forking Workflow</a><ul>
<li class="chapter" data-level="14.3.1" data-path="git-collaboration.html"><a href="git-collaboration.html#pull-requests"><i class="fa fa-check"></i><b>14.3.1</b> Pull Requests</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="git-collaboration.html"><a href="git-collaboration.html#resources-13"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="oop.html"><a href="oop.html"><i class="fa fa-check"></i><b>15</b> Object-Oriented Programming</a><ul>
<li class="chapter" data-level="15.1" data-path="oop.html"><a href="oop.html#why-objects"><i class="fa fa-check"></i><b>15.1</b> Why Objects?</a></li>
<li class="chapter" data-level="15.2" data-path="oop.html"><a href="oop.html#defining-classes"><i class="fa fa-check"></i><b>15.2</b> Defining Classes</a><ul>
<li class="chapter" data-level="15.2.1" data-path="oop.html"><a href="oop.html#attributes"><i class="fa fa-check"></i><b>15.2.1</b> Attributes</a></li>
<li class="chapter" data-level="15.2.2" data-path="oop.html"><a href="oop.html#methods"><i class="fa fa-check"></i><b>15.2.2</b> Methods</a></li>
<li class="chapter" data-level="15.2.3" data-path="oop.html"><a href="oop.html#constructors"><i class="fa fa-check"></i><b>15.2.3</b> Constructors</a></li>
<li class="chapter" data-level="15.2.4" data-path="oop.html"><a href="oop.html#string-representations"><i class="fa fa-check"></i><b>15.2.4</b> String Representations</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="oop.html"><a href="oop.html#resources-14"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="pandas.html"><a href="pandas.html"><i class="fa fa-check"></i><b>16</b> The <code>pandas</code> Library</a><ul>
<li class="chapter" data-level="16.1" data-path="pandas.html"><a href="pandas.html#setting-up-pandas"><i class="fa fa-check"></i><b>16.1</b> Setting up <code>pandas</code></a></li>
<li class="chapter" data-level="16.2" data-path="pandas.html"><a href="pandas.html#series"><i class="fa fa-check"></i><b>16.2</b> Series</a><ul>
<li class="chapter" data-level="16.2.1" data-path="pandas.html"><a href="pandas.html#series-operations-and-methods"><i class="fa fa-check"></i><b>16.2.1</b> Series Operations and Methods</a></li>
<li class="chapter" data-level="16.2.2" data-path="pandas.html"><a href="pandas.html#accessing-series"><i class="fa fa-check"></i><b>16.2.2</b> Accessing Series</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="pandas.html"><a href="pandas.html#dataframes"><i class="fa fa-check"></i><b>16.3</b> DataFrames</a><ul>
<li class="chapter" data-level="16.3.1" data-path="pandas.html"><a href="pandas.html#dataframe-operations-and-methods"><i class="fa fa-check"></i><b>16.3.1</b> DataFrame Operations and Methods</a></li>
<li class="chapter" data-level="16.3.2" data-path="pandas.html"><a href="pandas.html#accessing-dataframes"><i class="fa fa-check"></i><b>16.3.2</b> Accessing DataFrames</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="pandas.html"><a href="pandas.html#resources-15"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="javascript.html"><a href="javascript.html"><i class="fa fa-check"></i><b>17</b> JavaScript</a><ul>
<li class="chapter" data-level="17.1" data-path="javascript.html"><a href="javascript.html#programming-with-javascript"><i class="fa fa-check"></i><b>17.1</b> Programming with JavaScript</a><ul>
<li class="chapter" data-level="17.1.1" data-path="javascript.html"><a href="javascript.html#history-and-versions"><i class="fa fa-check"></i><b>17.1.1</b> History and Versions</a></li>
<li class="chapter" data-level="17.1.2" data-path="javascript.html"><a href="javascript.html#running-javascript"><i class="fa fa-check"></i><b>17.1.2</b> Running JavaScript</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="javascript.html"><a href="javascript.html#javascript-basics"><i class="fa fa-check"></i><b>17.2</b> JavaScript Basics</a><ul>
<li class="chapter" data-level="17.2.1" data-path="javascript.html"><a href="javascript.html#strict-mode"><i class="fa fa-check"></i><b>17.2.1</b> Strict Mode</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="javascript.html"><a href="javascript.html#variables-1"><i class="fa fa-check"></i><b>17.3</b> Variables</a><ul>
<li class="chapter" data-level="17.3.1" data-path="javascript.html"><a href="javascript.html#basic-data-types"><i class="fa fa-check"></i><b>17.3.1</b> Basic Data Types</a></li>
<li class="chapter" data-level="17.3.2" data-path="javascript.html"><a href="javascript.html#type-coercion"><i class="fa fa-check"></i><b>17.3.2</b> Type Coercion</a></li>
<li class="chapter" data-level="17.3.3" data-path="javascript.html"><a href="javascript.html#arrays"><i class="fa fa-check"></i><b>17.3.3</b> Arrays</a></li>
<li class="chapter" data-level="17.3.4" data-path="javascript.html"><a href="javascript.html#objects"><i class="fa fa-check"></i><b>17.3.4</b> Objects</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="javascript.html"><a href="javascript.html#control-structures"><i class="fa fa-check"></i><b>17.4</b> Control Structures</a><ul>
<li class="chapter" data-level="17.4.1" data-path="javascript.html"><a href="javascript.html#conditionals"><i class="fa fa-check"></i><b>17.4.1</b> Conditionals</a></li>
<li class="chapter" data-level="17.4.2" data-path="javascript.html"><a href="javascript.html#loops"><i class="fa fa-check"></i><b>17.4.2</b> Loops</a></li>
</ul></li>
<li class="chapter" data-level="17.5" data-path="javascript.html"><a href="javascript.html#functions-1"><i class="fa fa-check"></i><b>17.5</b> Functions</a><ul>
<li class="chapter" data-level="17.5.1" data-path="javascript.html"><a href="javascript.html#functional-programming-1"><i class="fa fa-check"></i><b>17.5.1</b> Functional Programming</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="javascript.html"><a href="javascript.html#resources-16"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="web-programming.html"><a href="web-programming.html"><i class="fa fa-check"></i><b>18</b> Web Programming</a><ul>
<li class="chapter" data-level="18.1" data-path="web-programming.html"><a href="web-programming.html#web-pages-and-html"><i class="fa fa-check"></i><b>18.1</b> Web Pages and HTML</a><ul>
<li class="chapter" data-level="18.1.1" data-path="web-programming.html"><a href="web-programming.html#elements-are-nested"><i class="fa fa-check"></i><b>18.1.1</b> Elements are Nested</a></li>
<li class="chapter" data-level="18.1.2" data-path="web-programming.html"><a href="web-programming.html#scalable-vector-graphics-svg"><i class="fa fa-check"></i><b>18.1.2</b> Scalable Vector Graphics (SVG)</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="web-programming.html"><a href="web-programming.html#dom-manipulation-with-d3"><i class="fa fa-check"></i><b>18.2</b> DOM Manipulation with D3</a><ul>
<li class="chapter" data-level="18.2.1" data-path="web-programming.html"><a href="web-programming.html#selecting-elements"><i class="fa fa-check"></i><b>18.2.1</b> Selecting Elements</a></li>
<li class="chapter" data-level="18.2.2" data-path="web-programming.html"><a href="web-programming.html#changing-elements"><i class="fa fa-check"></i><b>18.2.2</b> Changing Elements</a></li>
<li class="chapter" data-level="18.2.3" data-path="web-programming.html"><a href="web-programming.html#adding-elements"><i class="fa fa-check"></i><b>18.2.3</b> Adding Elements</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="web-programming.html"><a href="web-programming.html#user-events"><i class="fa fa-check"></i><b>18.3</b> User Events</a></li>
<li class="chapter" data-level="18.4" data-path="web-programming.html"><a href="web-programming.html#ajax"><i class="fa fa-check"></i><b>18.4</b> AJAX</a></li>
<li class="chapter" data-level="" data-path="web-programming.html"><a href="web-programming.html#resources-17"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="d3.html"><a href="d3.html"><i class="fa fa-check"></i><b>19</b> D3 Visualizations</a><ul>
<li class="chapter" data-level="19.1" data-path="d3.html"><a href="d3.html#the-data-join"><i class="fa fa-check"></i><b>19.1</b> The Data Join</a><ul>
<li class="chapter" data-level="19.1.1" data-path="d3.html"><a href="d3.html#entering-and-exiting-elements"><i class="fa fa-check"></i><b>19.1.1</b> Entering and Exiting Elements</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="d3.html"><a href="d3.html#animation"><i class="fa fa-check"></i><b>19.2</b> Animation</a></li>
<li class="chapter" data-level="19.3" data-path="d3.html"><a href="d3.html#margins-and-positioning"><i class="fa fa-check"></i><b>19.3</b> Margins and Positioning</a></li>
<li class="chapter" data-level="19.4" data-path="d3.html"><a href="d3.html#scales"><i class="fa fa-check"></i><b>19.4</b> Scales</a><ul>
<li class="chapter" data-level="19.4.1" data-path="d3.html"><a href="d3.html#axes"><i class="fa fa-check"></i><b>19.4.1</b> Axes</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="d3.html"><a href="d3.html#resources-18"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="markdown.html"><a href="markdown.html"><i class="fa fa-check"></i><b>A</b> Markdown</a><ul>
<li class="chapter" data-level="A.1" data-path="markdown.html"><a href="markdown.html#writing-markdown"><i class="fa fa-check"></i><b>A.1</b> Writing Markdown</a><ul>
<li class="chapter" data-level="A.1.1" data-path="markdown.html"><a href="markdown.html#text-formatting"><i class="fa fa-check"></i><b>A.1.1</b> Text Formatting</a></li>
<li class="chapter" data-level="A.1.2" data-path="markdown.html"><a href="markdown.html#text-blocks"><i class="fa fa-check"></i><b>A.1.2</b> Text Blocks</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="markdown.html"><a href="markdown.html#rendering-markdown"><i class="fa fa-check"></i><b>A.2</b> Rendering Markdown</a></li>
<li class="chapter" data-level="" data-path="markdown.html"><a href="markdown.html#resources-19"><i class="fa fa-check"></i>Resources</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Programming</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="d3" class="section level1">
<h1><span class="header-section-number">Chapter 19</span> D3 Visualizations</h1>
<p>While the <a href="https://d3js.org/">D3 library</a> can be used to do fundamental DOM manipulations and event handling, the true power of the library comes in its ability to create <strong>dynamic, data-driven visualizations</strong>—graphical representations of data sets that can change in response to changes in the data. In particular, D3 provides robust tools that make it easy to relate (<strong>join</strong>) the <em>DOM elements</em> shown on the screen (most commonly, SVG shapes) to the values in a data <em>array</em>. Then it is just up to you to specify how the data should be related to <em>visual properties</em> of the DOM in order to create a visualization.</p>
<p>This chapter will introduce the basics of creating data-driven visualizations using using D3, including data joining, data scaling, axes and decorations, and animations.</p>
<div id="the-data-join" class="section level2">
<h2><span class="header-section-number">19.1</span> The Data Join</h2>
<p>To start, consider an <strong>array of objects</strong> representing a <em>table</em> of data (similar to what you’ve seen before):</p>
<pre class="language-js"><code><span class="token keyword">var</span> peopleTable <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">'Ada'</span><span class="token punctuation">,</span> mathExam<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span> spanishExam<span class="token punctuation">:</span> <span class="token number">83</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">'Bob'</span><span class="token punctuation">,</span> mathExam<span class="token punctuation">:</span> <span class="token number">82</span><span class="token punctuation">,</span> spanishExam<span class="token punctuation">:</span> <span class="token number">88</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">'Chris'</span><span class="token punctuation">,</span> mathExam<span class="token punctuation">:</span> <span class="token number">78</span><span class="token punctuation">,</span> spanishExam<span class="token punctuation">:</span> <span class="token number">92</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">'Diya'</span><span class="token punctuation">,</span> mathExam<span class="token punctuation">:</span> <span class="token number">91</span><span class="token punctuation">,</span> spanishExam<span class="token punctuation">:</span> <span class="token number">79</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">'Emma'</span><span class="token punctuation">,</span> mathExam<span class="token punctuation">:</span> <span class="token number">93</span><span class="token punctuation">,</span> spanishExam<span class="token punctuation">:</span> <span class="token number">87</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre>
<p>At its most basic level, a <strong>data visualization</strong> is a graphical image whose components (e.g., shapes) represent different elements in the array (observations/rows of the data). For example, a bar chat may have a single <code>rectangle</code> for each element in the array, a scatter plot may have a single <code>circle</code> for each element, and a line chart may have a <code>path</code> with a different “control point” for each element. D3 will let you <em>programmatically</em> associate an SVG element (or set of elements) with each element in a JavaScript array in order to define this visualization. For example, each of the five items in the above <code>peopleTable</code> could be associated with one of five <code>&lt;rect&gt;</code> elements in a bar chart.</p>
<p>Moreover, you also want each shape in your visualization to have a different appearance based on the properties (<em>fields</em>) of the data. For example, the <code>width</code> attribute of a <code>&lt;rect&gt;</code> may depend on the <code>mathExam</code> of the array element, and the <code>y</code> attribute may depend on the <em>index</em> of that element in the array. Thus you need to define a <strong>mapping</strong> between data properties and the <a href="http://www.infovis-wiki.net/index.php?title=Visual_Variables"><strong><em>visual attributes</em></strong></a> (size, position, color, etc.) of each component in the visualization.</p>
<p>D3 lets you create a mapping between an <em>array</em> of data and a <em>selection</em> of DOM elements—what is called <strong>the data join</strong> (the “joining” of data with the selection). You establish this mapping by calling the <strong><code>data()</code></strong> method <em>on</em> the selection of DOM elements, and passing in the array of data you wish to map to those elements:</p>
<pre class="language-js"><code><span class="token keyword">var</span> rects <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'rects'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//selection of all rects in the SVG</span>
<span class="token keyword">var</span> dataJoin <span class="token operator">=</span> rects<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>peopleTable<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//join with the people table</span></code></pre>
<p>This <em>join</em> associates each element in the array with a single element in the selection pair-wise (e.g., the first DOM element is associated with the first array element, the second with second, and so on).</p>
<p>Once data has been joined to the selection, it is possible to modify the attributes of the DOM elements (as you’ve done previously) utilizing that element’s associated <strong>datum</strong> (data item). You do this by passing a <em>callback function</em> to the <code>attr()</code> method. This callback function can take in the <em>datum</em> and the <em>index</em> in the array as arguments, and should return the appropriate value for the attribute for that particular element:</p>
<pre class="language-js"><code><span class="token comment">//a function that determines width of a rectangle based on a datum</span>
<span class="token keyword">var</span> <span class="token function-variable function">calcWidth</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>datum<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> datum<span class="token punctuation">.</span>mathExam<span class="token punctuation">;</span>  <span class="token comment">//width is the math score</span>
<span class="token punctuation">}</span>

<span class="token comment">//set the width attribute, using the callback to calculate the width</span>
<span class="token comment">//for each (joined) element in the selection</span>
dataJoin<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> calcWidth<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<ul>
<li><p>Remember that the <code>attr()</code> function is <em>vectorized</em>, so called individually on each element in the selection!</p></li>
<li><p>Note that the <code>index</code> was not used—technically, you could have left it out of the argument list!</p></li>
<li><p>If you wish to refer to the DOM element itself inside the callback function, that value is assigned to a local variable called <strong><code>this</code></strong>.</p></li>
</ul>
<p>As you may have guessed, we almost always use <em>anonymous callback functions</em> for this, and abbreviate the arguments to <code>d</code> and <code>i</code> to save space:</p>
<pre class="language-js"><code><span class="token comment">//this is equivalent to the above</span>
dataJoin<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> d<span class="token punctuation">.</span>mathExam<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//compact one-line!</span></code></pre>
<p>You can of course use this process to specify all of the different attributes of an SVG element, including sizes, positions, fill and stroke colors, etc. It is also possible to pass a calculating callback function to most selection methods (including e.g. the <code>style()</code> function if you want to use CSS styles).</p>
<ul>
<li>Similarly, the <code>on()</code> event handler callback takes in the <em>datum</em> and <em>index</em> as arguments, if you wish to refer to the joined data when a user clicks on an element!</li>
</ul>
<div id="entering-and-exiting-elements" class="section level3">
<h3><span class="header-section-number">19.1.1</span> Entering and Exiting Elements</h3>
<p>Importantly, it is possible that the <em>size</em> of the data array might not match the size of the selection! While the data table might have 5 elements (as above), the selection might have 3, 6, or even 0 <code>&lt;rect&gt;</code> elements! In this situation, you cannot just join the the data to the selection, since there isn’t a one-to-one mapping.</p>
<p>In D3, any joined <em>data</em> elements that lack corresponding DOM elements are referred to as the <strong>enter selection</strong> (they are data elements that need to “enter” the visualization). They can be accessed by calling the <strong><code>enter()</code></strong> method <em>on the data join</em>. This will return a selection of null-like “placeholder” elements, each of which is joined with a data item (that didn’t otherwise have an element to join with). Most commonly, you then use the <code>append()</code> method to create a new DOM element for each item in this selection:</p>
<pre class="language-html"><code><span class="token comment">&lt;!-- Assume an empty list --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></code></pre>
<pre class="language-js"><code><span class="token comment">//add a &lt;li> for each number in an array:</span>
<span class="token keyword">var</span> listItems <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'#list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//select the (zero) &lt;li> elements</span>
<span class="token keyword">var</span> dataJoin <span class="token operator">=</span> listItems<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//join with an array of data</span>
<span class="token keyword">var</span> enterSelection <span class="token operator">=</span> dataJoin<span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//get the enter selection</span>
enterSelection<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span> <span class="token comment">//add a new &lt;li> for each "placeholder"</span>
    <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> d<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">//set the text to be the datum</span></code></pre>
<p>This would produce the DOM tree:</p>
<pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></code></pre>
<p>Note that we can and do chain most of these calls together, rather than defining a separate <code>enterSelection</code> variable.</p>
<div class="alert alert-warning">
<p><strong>Important!</strong> Notice how this lets you create elements for data without needing to specify any DOM for those elements ahead of time! This means that you do not need to write any SVG elements in the HTML, and instead can just <code>append()</code> elements for the <code>enter()</code>ing data.</p>
</div>
<p>Equivalently, any <em>DOM elements</em> that lack a joined data element are referred to as the <strong>exit selection</strong> (they are DOM elements that need to “exit” the visualization). They can be accessed by calling the <strong><code>exit()</code></strong> method <em>on the data join</em>. This will return a selection of elements, none of which have a datum joined to them. Most commonly, you then use <code>remove()</code> to remove these data-less elements from the DOM:</p>
<pre class="language-js"><code><span class="token comment">//select the above HTML (5 &lt;li> elements)</span>
<span class="token keyword">var</span> listItems <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'#list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//select the (5) &lt;li></span>
<span class="token keyword">var</span> dataJoin <span class="token operator">=</span> listItems<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//join with an (smaller) array of data</span>
<span class="token keyword">var</span> exitSelection <span class="token operator">=</span> dataJoin<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//get the exit selection</span>
exitSelection<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//remove the extraneous &lt;li></span></code></pre>
<p>To summarize:</p>
<ul>
<li><code>data()</code> returns the items in the data array <strong><em>and</em></strong> in the DOM</li>
<li><code>enter()</code> returns items in the data array <strong><em>and not</em></strong> in the DOM</li>
<li><code>exit()</code> return items in the DOM <strong><em>and not</em></strong> in the data array</li>
</ul>
<div id="object-consistency" class="section level4">
<h4><span class="header-section-number">19.1.1.1</span> Object Consistency</h4>
<p>As data is “entering” and “exiting” over time (e.g., in response to user interaction), it is important to make sure that you are <em>consistent</em> about the mapping between the data and DOM elements. If you do a second data join with a smaller array of data (a sub-list), you want to make sure you remove the correct elements (and not just the ones at the end of the list). Similarly, if you do a data join with a larger array of data, you want to make sure you append elements only for the data that isn’t already shown.</p>
<p>By default, the <code>data()</code> join will associate the first datum with the first DOM element, the second datum with the second DOM element, and so on. But this means that if you later remove the first datum element, then “which” DOM element is associated with which datum will change (e.g., the previously-second datum will be joined with the first DOM element). This can cause problems, particularly for utilizing <a href="https://bost.ocks.org/mike/constancy/">animations</a>.</p>
<p>In order to make sure that your joining remains consistent, you specify a second argument to the <code>data()</code> function, known as the <strong>key function</strong>. This is a <em>callback function</em> (which takes the datum and index as arguments, as usual) that should return a <em>unique string identifier</em> for each datum—in effect, the “key” that D3 can use to look up that datum when joining:</p>
<pre class="language-js"><code><span class="token comment">//rectangle selected from above example</span>
<span class="token keyword">var</span> rects <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'rects'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> dataJoin <span class="token operator">=</span> rects<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>peopleTable<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> d<span class="token punctuation">.</span>name<span class="token punctuation">;</span>  <span class="token comment">// use the `name` property as the "key"</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>It is common to use properties such as <code>name</code> or <code>id</code> as the key function—if you are familiar with databases, these would be the <a href="https://en.wikipedia.org/wiki/Foreign_key">foreign keys</a>.</p>
<p class="alert alert-danger">
<strong>Caution</strong>, when you first call the <code>data()</code> function, the key function callback is executed once for each DOM element already in the selection, <em>and then</em> once for each new datum in the data. This means that if your selection included any un-joined DOM elements (e.g., because you started off with some hard-coded <code>&lt;rect&gt;</code> elements), then the <code>datum</code> argument to the callback will be <code>undefined</code>. The best solution for this is to always <code>append()</code> entering DOM elements!
</p>
</div>
<div id="the-general-update-pattern" class="section level4">
<h4><span class="header-section-number">19.1.1.2</span> The General Update Pattern</h4>
<p>When modifying the visualized data in response to user interaction, it is very common for a data join to include both “entering” and “existing” data (e.g., some new data added, and some old data removed). In fact, whenever you do a data join, there are 3 possible situations:</p>
<ol style="list-style-type: decimal">
<li>The data is <em>“updating”</em>, and the DOM attributes need to be modified accordingly. This data were previously joined to DOM elements, and so will be included in the <code>data()</code> selection.</li>
<li>The data is <em>“incoming”</em>, and so new elements need to be added to the DOM. This data will be included in the <code>enter()</code> selection.</li>
<li>The data is <em>“outgoing”</em>, and so elements need to be removed from the DOM. This data will be included in the <code>exit()</code> selection.</li>
</ol>
<p>As such, “updating” a visualization with a new data join involves a few steps, as detailed below:</p>
<pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span>newDataArray<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//perform the data join with the "new" data list</span>
    <span class="token keyword">var</span> rects <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'rect'</span><span class="token punctuation">)</span>
                  <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>newDataArray<span class="token punctuation">,</span> keyFunc<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//use key function for consistency</span>

    <span class="token comment">//Update already bound elements (that are not coming or going)</span>
    rects<span class="token punctuation">.</span><span class="token function">classed</span><span class="token punctuation">(</span><span class="token string">'updated'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//e.g., add style class to updating</span>

    <span class="token comment">//Handle entering data</span>
    <span class="token keyword">var</span> present <span class="token operator">=</span> rects<span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'rect'</span><span class="token punctuation">)</span>  <span class="token comment">//add new DOM elements</span>
                <span class="token punctuation">.</span><span class="token function">classed</span><span class="token punctuation">(</span><span class="token string">'new'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>  <span class="token comment">//e.g., add style class to entering</span>
                <span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>rects<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//save new DOM elements in a selection</span>

    <span class="token comment">//Handle now present data (the merged selection)</span>
    present<span class="token punctuation">.</span><span class="token function">classed</span><span class="token punctuation">(</span><span class="token string">'here'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//e.g., add style class to current (including new)</span>

    <span class="token comment">//Handle exiting data (from original selection)</span>
    rects<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>The stages of this process are:</p>
<ol style="list-style-type: decimal">
<li>Use <code>data()</code> to join the elements; modify the attributes of any that are bound.</li>
<li>Use <code>enter()</code> to create new elements; modify the attributes of the new elements.</li>
<li>Use <code>merge()</code> to combine the old and new; modify the attributes of anything that will stay.</li>
<li>Use <code>exit()</code> to remove old elements.</li>
</ol>
<p>The above example encapsulates these steps into a function for re-use!</p>
<p>This process is known as the <a href="https://bl.ocks.org/mbostock/3808218"><em>General Update Pattern</em></a>, and is the recommended way of handling <em>dynamic</em> (interactive) data visualizations. Every time the data needs to change—whether because the user interacted with the web page, or the the data was being “live streamed” from an API—you call this general update function. The function will join the now-current data to visualize, and then update the DOM elements that make up the visualization in order to match the latest data.</p>
<p>In developing the <code>update()</code> function, you should specify what the visualization should look like for <em>any</em> set of data. Then you can change the data however you want, and the visualization will continue to reflect the data!</p>
</div>
</div>
</div>
<div id="animation" class="section level2">
<h2><span class="header-section-number">19.2</span> Animation</h2>
<p>D3 is primarily used for <em>dynamic</em> data visualizations, in which the data being represented may change over time (otherwise, you would just use Illustrator or a charting library). While the <em>General Update Pattern</em> allows you to easily implement consistent changes to the visualization when the data set change, you often want to add a “wow” factor by having those changes be <strong>animated</strong>. Elements should fly to their new position, slide into place, fade in or out, or perform some other kind of visual change over a short time. This can help the user understand what is going on as the data changes, as well as make the visualization seem more “smooth”.</p>
<p>With D3, you can animate element changes by using <a href="https://github.com/d3/d3-transition"><strong>transitions</strong></a>. A transition applies changes to an element (e.g, <code>attr()</code> method calls) over a length of time, rather than instantaneously. For example, rather than instantly changing an rectangle’s <code>width</code> attribute from <code>0</code> to <code>100</code>, you could have that attribute take 1 second to change, causing the rectangle to “grow”.</p>
<p class="alert alert-info">
D3 transitions use <a href="https://en.wikipedia.org/wiki/Linear_interpolation">linear interpolation</a> to determine the value of the attributes at different times. So if you transitioned the width from <code>0</code> to <code>100</code> over 1 second, at the start of the second the width would be <code>0</code>, at the end it would be <code>100</code>, and halfway through (at 0.5 seconds) it would be <code>50</code>.
</p>
<p>You create a transition by calling the <strong><code>transition()</code></strong> method on a selection. This creates a new <code>transition</code>, upon which you can call normal DOM manipulation methods (specifically: <code>attr()</code>, <code>style()</code> and <code>text()</code>):</p>
<pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'rect'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//start at size 10</span>

d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'rect'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//create a transition</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>   <span class="token comment">//call attribute to change over time</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>  <span class="token comment">//this will animate simultaneously</span></code></pre>
<p>This example will cause the rectangle to “grow”! Note that in practice, anything after a <code>transition()</code> call in a method chain will be animated.</p>
<p>By default, transitions occur over 250 milliseconds (0.25 seconds). However, you can call additional methods on the <code>transition</code> in order to adjust this duration:</p>
<pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'rect'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//create a transition</span>
    <span class="token punctuation">.</span><span class="token function">duration</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>  <span class="token comment">//animation takes 1000ms (1 second)</span>
    <span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>      <span class="token comment">//wait 100ms before starting</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>   <span class="token comment">//call attribute to change over time</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>  <span class="token comment">//this will animate simultaneously</span></code></pre>
<p>You can use a sequence of <code>transition()</code> calls to make multiple transitions that occur one after another:</p>
<pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'rect'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//create a transition</span>
        <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>   <span class="token comment">//first change the width</span>
    <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//a second transition (occurs afterwards)</span>
        <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>  <span class="token comment">//then change the height</span></code></pre>
<p>Transitions are a fun addition to include with any dynamic visualization; just add the <code>transition()</code> call into the chain before you update the attributes! Indeed, in the <em>General Update Pattern</em>, transitions can be used for all three of entering, exiting, and updating elements. See <a href="https://bl.ocks.org/mbostock/3808234">this demo</a> for an example.</p>
</div>
<div id="margins-and-positioning" class="section level2">
<h2><span class="header-section-number">19.3</span> Margins and Positioning</h2>
<p>When implementing a visualization, you often want to position groups of elements together. For example, you may want all of the circles in a scatter plot to be “centered” in the <code>&lt;svg&gt;</code> image, with some white space on the side (a <strong>margin</strong>) to use for titles or axis labels. While it is possible to do this positioning by carefully specifying the attributes (e.g., add <code>30</code> to each element’s <code>x</code> attribute to give 30 pixels of white space), that can become tedious and error-prone—particularly if you want to change the spacing later!</p>
<p>However, it is possible to do this easily using SVG (with or without D3)! You are able to <strong>group</strong> SVG elements together by nesting them inside of a <code>&lt;g&gt;</code> (<strong>g</strong>roup) element. A <code>&lt;g&gt;</code> acts somewhat like a <code>&lt;div&gt;</code> in HTML—it has no visual appearance on its own, but can help to semantically organize DOM elements. You can even give <code>&lt;g&gt;</code> elements <code>id</code> attributes, allowing you to easily select just the shapes inside of that group.</p>
<p>All elements in a <code>&lt;g&gt;</code> will be positioned <strong>relative to the group</strong>. A <code>&lt;rect&gt;</code> with an <code>x</code> of <code>0</code> will be positioned at the edge of its parent <code>&lt;g&gt;</code>—where-ever that <code>&lt;g&gt;</code> happens to be! Thus you can easily add margins to groups of elements by nesting them in a <code>&lt;g&gt;</code>, and then positioning that <code>&lt;g&gt;</code> correctly</p>
<p>The easiest way to position a <code>&lt;g&gt;</code> element is to specify it’s <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/transform"><strong><code>transform</code></strong></a> attribute. This attribute takes as a value a string representing how that element should “move” (be transformed). The “transformation string” is written like a sequence of space-separated function calls, each specifying a different movement that should be applied. For example:</p>
<pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>g</span> <span class="token attr-name">transform</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>translate(20,50)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token comment">&lt;!-- move 20 in x, 50 in y --></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rect</span> <span class="token attr-name">x</span><span class="token attr-value"><span class="token punctuation">=</span>0</span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation">=</span>0</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span>20</span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span>20</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>red<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rect</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rect</span> <span class="token attr-name">x</span><span class="token attr-value"><span class="token punctuation">=</span>0</span> <span class="token attr-name">y</span><span class="token attr-value"><span class="token punctuation">=</span>30</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span>20</span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span>20</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>blue<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rect</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>g</span><span class="token punctuation">></span></span></code></pre>
<p>specifies that a group should be <a href="https://en.wikipedia.org/wiki/Translation_(geometry)"><strong>translated</strong></a> or moved by 20 units (pixels) in the x direction and 50 units in the y direction.</p>
<ul>
<li><p>Other transformations include <code>rotate(degrees)</code> to rotate an element <em>counterclockwise</em> by the given degrees. You can both translate and rotate (in that order) using e.g., <code>transform=&quot;translate(20,50) rotate(45)&quot;</code>.</p></li>
<li><p>All SVG elements support the <code>transform</code> attribute. In fact, angle can be used as a visual attribute!</p></li>
</ul>
<p>In D3, you use <code>&lt;g&gt;</code> groups to do positioning by creating a group with the appropriate transformation (constructing the “transformation function string” using String concatenation), then appending elements to that group:</p>
<pre class="language-js"><code><span class="token keyword">var</span> group <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span> <span class="token comment">//add a group</span>
    <span class="token comment">//move over to add margins (specified as variables)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'transform'</span><span class="token punctuation">,</span><span class="token string">'translate('</span><span class="token operator">+</span>marginLeft<span class="token operator">+</span><span class="token string">','</span><span class="token operator">+</span>marginTop<span class="token operator">+</span><span class="token string">')'</span><span class="token punctuation">)</span>

<span class="token comment">//do the normal data joining</span>
group<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'rect'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>myData<span class="token punctuation">)</span>  <span class="token comment">//select all the rectangles in that group</span>
    <span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'rect'</span><span class="token punctuation">)</span>  <span class="token comment">//create new rectangles as normal</span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment">//will be relative to the &lt;g></span>
      <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'y'</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment">//will be relative to the &lt;g></span></code></pre>
<p>The margins are usually specified using variables. See <a href="https://bl.ocks.org/mbostock/3019563">this demo</a> for an example (note: it uses D3 version 3).</p>
</div>
<div id="scales" class="section level2">
<h2><span class="header-section-number">19.4</span> Scales</h2>
<p>In the <code>peopleTable</code> example, we <em>mapped</em> exam scores to the <code>width</code> attribute directly: each point on an exam corresponded to a single unit (pixel) of width. But what if you were visualizing very small data (e.g., daily interest on a small investment) or very large data (e.g., number of books held by a library)? You would need to <em>scale</em> the values used: that is, $0.001 earnings might be 20 pixels, or 100 books might be a single pixel.</p>
<div class="figure">
<img src="img/d3/d3scale1.png" alt="Scaling example" />
<p class="caption">Scaling example</p>
</div>
<p>In D3, a <strong>scale</strong> is a function that <em>maps</em> from the data <strong><em>domain</em></strong> (in data values) to the visualization’s <strong><em>range</em></strong> (in pixel values) in a consistent way. For example, if you wanted to perform the scaling illustrated in the above diagram you would need to have the <em>domain</em> of 20 to 80 (length of 60) map to the <em>range</em> of 0 to 120 (length of 120). You could write a function that does the math to do this for any individual value within the range!</p>
<pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">diagramScale</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> domainLength <span class="token operator">=</span> <span class="token number">80</span><span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">//length of domain</span>
  <span class="token keyword">var</span> rangeLength <span class="token operator">=</span> <span class="token number">120</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//length of range</span>

  <span class="token comment">//transform value to be between 0 and domainLength</span>
  <span class="token keyword">var</span> shifted <span class="token operator">=</span> value <span class="token operator">-</span> <span class="token number">20</span><span class="token punctuation">;</span>  <span class="token comment">//e.g., 50 => 30</span>

  <span class="token comment">//scale (enlarge) the domain to the range</span>
  <span class="token keyword">var</span> rangeValue <span class="token operator">=</span> shifted<span class="token operator">*</span><span class="token punctuation">(</span>rangeLength<span class="token operator">/</span>domainLength<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//e.g., 30 => 60</span>

  <span class="token keyword">return</span> rangeValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//example</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">diagramScale</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//60, as above</span></code></pre>
<p>This math is doable, but can be tedious—especially if the mapping needs to be more complex (such as using a <em>logarithmic</em> scale, or scaling values like colors).</p>
<p>Because scaling is such a common operation, D3 provides a set of <a href="https://github.com/d3/d3-scale">helper functions</a> that can be used to easily generate these <em>scaling functions</em>, allowing you to quickly specify a mapping (and dynamically change that mapping if the domain of the displayed data changes!)</p>
<p>You can create a simple (linear) scale by calling the <code>d3.scaleLinear()</code> function. This function <strong>returns a new function</strong> that can be used to do the scaling!</p>
<pre class="language-js"><code><span class="token comment">//create the scale function</span>
<span class="token keyword">var</span> diagramScale <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                       <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//specify the domain</span>
                       <span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">120</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//specify the range</span>

<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">diagramScale</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//60, as above</span>
<span class="token keyword">var</span> source <span class="token operator">=</span> diagramScale<span class="token punctuation">.</span><span class="token function">invert</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//50, get the domain value from the range</span></code></pre>
<p class="alert alert-warning">
Important: the returned <code>diagramScale</code> is a function! <em>Functions are values</em>, and in the <code>linearScale()</code> function returns a function as its result (instead of a string or an array).
</p>
<p>You “set” the domain and range for the resulting function by calling the <code>domain()</code> and <code>range()</code> functions on it respectively. These functions take in an array of two or more values which are used to specify “stops” where a particular domain value will map to a particular range value. Any values in between these stops will be <a href="https://en.wikipedia.org/wiki/Linear_interpolation">linearly interpolated</a> (hence the “linear scale”).</p>
<p>Note that it is also possible to use <em>colors</em> as range values, producing a nice <a href="https://en.wikipedia.org/wiki/Color_gradient">gradient</a>:</p>
<pre class="language-js"><code><span class="token keyword">var</span> scaleColor <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                     <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                     <span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'white'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//using named colors</span>

<span class="token function">scaleColor</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//rgb(0, 128, 0), or green</span>
<span class="token function">scaleColor</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//rgb(255, 255, 255), or white</span>
<span class="token function">scaleColor</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//rgb(255, 128, 128), or pink (between red and white)</span></code></pre>
<p>It is also possible to specify more options for a scale function by calling additional methods on it. For example, <code>clamp()</code> will make sure a domain value doesn’t go outside the range, and <code>nice()</code> will make sure the domain starts on nice round values. You can also use the <code>d3.min()</code> and <code>d3.max()</code> helper methods to perform a <strong>reducing</strong> operating on an array to get its minimum or maximum value (similar to the Python functions). This is useful when specify the domain values to be dependent on some external data.</p>
<p>D3 supports creating non-linear scaling functions as well. For example, <code>d3.scaleLog()</code> will produce a logarithmic mapping, and <code>d3.saleOrdinal()</code> will produce an <a href="https://en.wikipedia.org/wiki/Ordinal_data">ordinal</a> mapping. See <a href="https://github.com/d3/d3-scale">the documentation</a> for a complete list of options.</p>
<div id="axes" class="section level3">
<h3><span class="header-section-number">19.4.1</span> Axes</h3>
<p>Scales allow you to effectively position elements based on the data they represent. Additionally, you often would like to display the scales to the user, so that they know what values are associated with what positions. You do this by including <strong>axes</strong> (plural of <strong>axis</strong>) in your visualization. An axis is a <strong><em>visual representation of a scale</em></strong> that the user is able to see, and are used to explain to the <em>human</em> what the shapes in the visualization are depicting.</p>
<p>Since axes involve numerous elements to display (the axis bar, tick marks, labels on those tick marks, etc), D3 includes <a href="https://github.com/d3/d3-axis"><em>helper functions</em></a> that can be used to easily create these elements: <code>d3.axisBottom()</code> creates an axis with the tick marks and labels on the bottom, <code>d3.axisLeft()</code> creates an axis with the ticks and labels on the left, etc. You pass these functions the <em>scale</em> that you want to create an axis for:</p>
<pre class="language-js"><code><span class="token keyword">var</span> xScale <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleLinear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">120</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//the scale</span>
<span class="token keyword">var</span> xAxis <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">axisBottom</span><span class="token punctuation">(</span>xScale<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//make an axis for that scale</span></code></pre>
<p>Like scales, an axis (returned by the <code>axisBottom()</code> function) <strong>is itself a function</strong>—you can think of it as an “axis creator” function. When called, the function will create all of the appropriate DOM elements (in the correct positions!) for the axis, <em>appending</em> those elements to the argument of the function:</p>
<pre class="language-js"><code><span class="token keyword">var</span> axisGroup <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span>  <span class="token comment">//create and position a group to hold the axis</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'transform'</span><span class="token punctuation">,</span> <span class="token string">'translate('</span><span class="token operator">+</span>axisXPosition<span class="token operator">+</span><span class="token string">','</span><span class="token operator">+</span>axisYPosition<span class="token operator">+</span><span class="token string">')'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">xAxis</span><span class="token punctuation">(</span>axisGroup<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//create the axis in that group</span></code></pre>
<p>However, since this requires creating a separate variable for the “parent” of the axis, it is more common to have the <em>parent element itself</em> execute the axis creator function <strong>as a callback function</strong> by using the <code>call()</code> method:</p>
<pre class="language-js"><code>svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'g'</span><span class="token punctuation">)</span>  <span class="token comment">//create and position a group to hold the axis</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'transform'</span><span class="token punctuation">,</span> <span class="token string">'translate('</span><span class="token operator">+</span>axisXPosition<span class="token operator">+</span><span class="token string">','</span><span class="token operator">+</span>axisYPosition<span class="token operator">+</span><span class="token string">')'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>xAxis<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//call the axis creator function</span></code></pre>
<p>With the <code>call()</code> method, the “executing” object (e.g., what you call the method on) will be passed in as the first argument to the callback (similar to a <strong>pipe</strong>)—and since that is what the axis generator function expected, it will be able to create the axis in the correct location!</p>
<ul>
<li><p>The <code>call()</code> method can also be used to “abstract” attribute modifications into separate functions for readability and ease of use:</p>
<pre class="language-js"><code><span class="token comment">//a function that applies "styling" attributes to the selection</span>
<span class="token keyword">function</span> <span class="token function">styleShape</span><span class="token punctuation">(</span>selection<span class="token punctuation">)</span><span class="token punctuation">{</span>
selection
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'fill'</span><span class="token punctuation">,</span> <span class="token string">'gold'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'stroke'</span><span class="token punctuation">,</span> <span class="token string">'rebeccapurple'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'stroke-width'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

dataJoin<span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'rect'</span><span class="token punctuation">)</span>  <span class="token comment">//create new rects for each data element</span>
    <span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>styleShape<span class="token punctuation">)</span> <span class="token comment">//apply styling to those elements!</span></code></pre></li>
</ul>
<p>As with <em>transitions</em> and <em>scales</em>, there are <a href="https://github.com/d3/d3-axis">numerous methods</a> you can use to customize the axis created by the axis function. The most common options involve styling the tick marks by calling the <code>ticks()</code> method on the axis. This method usually takes two arguments: the number of tick marks to include, and a <a href="https://github.com/d3/d3-format">format string</a> specifying the format of the labels:</p>
<pre class="language-js"><code><span class="token keyword">var</span> xAxis <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">axisBottom</span><span class="token punctuation">(</span>xScale<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//make an axis for that scale</span>
xAxis<span class="token punctuation">.</span><span class="token function">ticks</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token string">'.0f'</span><span class="token punctuation">)</span>  <span class="token comment">//7 tick marks, format with 0 numbers after the decimal</span></code></pre>
<p>The second argument is a formatting string similar to that used in Python string formatting. You can also specify this formatting using the <code>d3.format()</code> function. See <a href="http://bl.ocks.org/zanarmstrong/05c1e95bf7aa16c4768e">this tool</a> to experiment with options.</p>
</div>
</div>
<div id="resources-18" class="section level2 unnumbered">
<h2>Resources</h2>
<p>Note that some of these resources may not be up-to-date with D3 version 4.0 (what we are importing by default).</p>
<div class="list-condensed">
<ul>
<li><a href="https://github.com/d3/d3/wiki/Tutorials">D3 Tutorials (Official)</a>,
<ul>
<li><a href="http://bost.ocks.org/mike/circles/">Three Little Circles (Bostock)</a></li>
<li><a href="https://bost.ocks.org/mike/join/">Thinking with Joins (Bostock)</a></li>
<li><a href="http://bl.ocks.org/mbostock/3808218">General Update Pattern (Bostock)</a></li>
<li><a href="https://bl.ocks.org/mbostock/3019563">Margin Convention</a></li>
</ul></li>
<li><a href="http://chimera.labs.oreilly.com/books/1230000000345/index.html">Interactive Data Visualization for the Web (Murray)</a>
<ul>
<li><a href="http://chimera.labs.oreilly.com/books/1230000000345/ch07.html">Scales</a></li>
<li><a href="http://chimera.labs.oreilly.com/books/1230000000345/ch08.html">Axes</a></li>
</ul></li>
<li><a href="http://www.jeromecukier.net/blog/2011/08/11/d3-scales-and-color/">D3 Scales and Colors</a> (v3, but a good summary of features)</li>
<li><a href="https://info474-s17.github.io/book/">Interactive Information Visualization (Freeman)</a>. See in particular Chapter 12-14.</li>
</ul>
</div>

</div>
</div>



</div>
            </section>

          </div>
        </div>
      </div>
<a href="web-programming.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="markdown.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["github", "facebook", "twitter", "google"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/infx511/book/edit/master/d3.Rmd",
"text": "Edit"
},
"download": ["intro-to-programming-for-data-science-visualization.pdf", "intro-to-programming-for-data-science-visualization.epub"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
